# 🧾 Dự Án Ngân Hàng Số – Trạng Thái Hiện Tại

## 🎯 Mục tiêu

Dựng hệ thống Core Banking MVP gồm:

- Đăng ký / đăng nhập người dùng
- Lưu trữ hồ sơ người dùng
- Giao dịch chuyển tiền
- Phát hiện gian lận theo thời gian thực
- Gắn kết Kafka, Cassandra, PostgreSQL, Docker, CI

---

## 🧠 Đội hình AI bạn điều phối

| Vai trò                      | Công cụ               | Nhiệm vụ                                        |
| ---------------------------- | --------------------- | ----------------------------------------------- |
| 🧠 Quân sư triển khai        | ChatGPT (hiện tại)    | Điều phối thực tế trên máy, triển khai hệ thống |
| 🏗️ Kiến trúc sư hệ thống     | ChatGPT (profile phụ) | Viết code Go, Docker, Kafka, DB                 |
| 📊 Phân tích nghiệp vụ       | Grok                  | Viết test case, mô hình hành vi người dùng      |
| 📋 Chính sách & logic nội bộ | ChatGPT (Claude role) | Thiết kế rule đánh giá rủi ro, compliance       |

---

## 📦 Các thành phần đã triển khai

### 1. Auth Service (`auth-service`)

- Go HTTP server
- Endpoints: `/register`, `/login`, `/refresh-token`
- Sử dụng JWT
- ✅ Đã chạy ổn

### 2. User Profile Service (`user-profile-service`)

- CRUD hồ sơ người dùng
- Middleware xác thực JWT
- Kết nối PostgreSQL
- ✅ Đã chạy

### 3. Transaction Ledger (`transaction-ledger`)

- Endpoint `/transaction`
- Sắp tích hợp Kafka Producer
- Cassandra làm backend bất biến
- 🟡 Đang chờ gắn Kafka

### 4. Risk Detection Service (`risk-detection`)

- Cấu trúc Go chuẩn: `cmd`, `internal`, `Makefile`
- API `/health`
- Module `EvaluateRisk()`
- ✅ Đã tích hợp Kafka Consumer (topic `transactions`)
- ✅ Sẵn sàng nhận giao dịch

### 5. Kafka + ZooKeeper

- Bitnami image
- Đã chỉnh `ADVERTISED_LISTENERS=127.0.0.1:9092`
- Kết nối thành công từ Go app
- ✅ Ổn định

### 6. Docker Infrastructure

- PostgreSQL, Cassandra, Kafka, Zookeeper, Keycloak
- Chạy bằng `docker compose up -d`
- ✅ Đã hoạt động

### 7. Postman API Test

- Đã tạo collection `/register`, `/login`, `/transaction`
- ✅ Đã test thành công

---

## 🔄 Tiến trình tổng quát (đã hoàn thành)

| Bước                         | Trạng thái |
| ---------------------------- | ---------- |
| Thiết kế kiến trúc dịch vụ   | ✅ Done    |
| Setup Docker Infra           | ✅ Done    |
| Tạo 3 service Go cơ bản      | ✅ Done    |
| Test API qua Postman         | ✅ Done    |
| Tạo `risk-detection` chuẩn   | ✅ Done    |
| Gắn Kafka consumer cho risk  | ✅ Done    |
| Fix lỗi `connect`, `no host` | ✅ Done    |
| Kafka ổn định, ready         | ✅ Done    |

---

## 🚧 Giai đoạn tiếp theo (đang triển khai)

| Bước                                      | Trạng thái | Ghi chú              |
| ----------------------------------------- | ---------- | -------------------- |
| Gắn Kafka Producer cho transaction-ledger | 🟡 Chưa    | Chuẩn bị gửi code    |
| Gửi giao dịch vào topic `transactions`    | 🟡 Chưa    | Risk-detection xử lý |
| Ghi log/phản hồi HIGH_RISK                | 🟡 Chưa    | Đã có EvaluateRisk() |
| (Tùy chọn) Gửi alert / lưu risk           | 🔜         | Mở rộng sau          |

---

## 🧭 Lộ trình tiếp theo

1. ✳️ Tạo Kafka producer trong `transaction-ledger`
2. 🚀 Gửi giao dịch mẫu từ API `/transaction`
3. ✅ Thấy log cảnh báo từ `risk-detection`
4. 🧩 Gắn loyalty / cashback (Grok + Claude)
5. ⚙️ Hoàn thiện CI / Makefile / Test automation
